import{d as R,r as v,c as k,s as T,o as U,a as A,u as G,w as H,b,e as u,f as a,g as e,h as C,i as n,j as p,k as d,t as r,F as E,l as M,m as F}from"./index.d23644fc.js";import{r as B}from"./fly-rnaseq.28208277.js";const J={class:"row justify-space-end align-center"},K={class:"flex lg12 md12 sm12 xs12"},P={class:"va-h4"},Q={class:"va-h4"},W=["href"],ee=R({__name:"Samples",setup(X){let _=[];const j=v({dataTypes:[]}),N=k(()=>i.samples.length),i=T();U(async()=>{j.value={...A.fly};const{parsedData:s}=await G("RNAseq","fly");_=s,i.samples=[..._]});const f=v(!1),V=v(!1),c=v({});k(()=>{const s=i.samples.map(l=>l.labExpId);return B.filter(l=>s.find(o=>l.name===o))}),H(()=>{const s=Object.entries(i.searchForm).filter(([l,o])=>o);$(s)});function g(s){return B.filter(l=>l.name===s)}function $(s){s.length?i.samples=[..._.filter(l=>s.every(([o,h])=>h===l[o]||l[o].includes(h)))]:i.samples=[..._]}return(s,l)=>{const o=n("VaButton"),h=n("VaMenuItem"),q=n("VaMenu"),z=n("va-data-table"),x=n("VaDivider"),S=n("VaListItemLabel"),D=n("VaListItemSection"),I=n("VaListSeparator"),w=n("VaListItem"),y=n("VaList"),L=n("VaModal");return p(),b("div",null,[u("div",J,[u("div",K,[a(z,{"wrapper-size":400,"item-size":46,"virtual-scroller":"","sticky-header":"",columns:["id","stage","tissue","replicate","compartment","actions"],items:C(i).samples},{"header(actions)":e(()=>[a(q,null,{anchor:e(()=>[a(o,{preset:"primary"},{default:e(()=>[d("Download ")]),_:1})]),default:e(()=>[a(h,null,{default:e(()=>[d(" Download Sample Metadata ("+r(C(N))+") ",1)]),_:1})]),_:1})]),"cell(id)":e(({row:t})=>[d(r(t.rowData.labExpId),1)]),"cell(actions)":e(({row:t})=>[a(o,{preset:"primary",onClick:m=>{f.value=!f.value,c.value=t.rowData}},{default:e(()=>[d("Show Details")]),_:2},1032,["onClick"]),a(o,{disabled:!g(t.rowData.labExpId).length,onClick:m=>{c.value=t.rowData,V.value=!V.value}},{default:e(()=>[d("Related Files")]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])])]),a(L,{"hide-default-actions":"","max-height":"300px",modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=t=>f.value=t)},{default:e(()=>[u("h4",P,"Details of sample "+r(c.value.labExpId),1),a(x),a(y,null,{default:e(()=>[(p(!0),b(E,null,M(Object.entries(c.value),([t,m],O)=>(p(),F(w,{key:O,class:"flex cursor-pointer"},{default:e(()=>[a(D,null,{default:e(()=>[a(S,null,{default:e(()=>[u("b",null,r(t)+":",1),d(" "+r(m),1)]),_:2},1024)]),_:2},1024),a(I)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"]),a(L,{"hide-default-actions":"",modelValue:V.value,"onUpdate:modelValue":l[1]||(l[1]=t=>V.value=t)},{default:e(()=>[u("h4",Q,"Files of sample "+r(c.value.labExpId),1),a(x),a(y,null,{default:e(()=>[(p(!0),b(E,null,M(g(c.value.labExpId),(t,m)=>(p(),F(w,{key:m,class:"flex cursor-pointer"},{default:e(()=>[a(D,null,{default:e(()=>[a(S,null,{default:e(()=>[u("a",{href:`https://public-docs.crg.es/rguigo/Data/${t.url}`},r(t.url.split("/")[t.url.split("/").length-1]),9,W)]),_:2},1024)]),_:2},1024),a(I)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])])}}});export{ee as default};
